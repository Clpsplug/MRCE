# HSP Multi-Resolution Compatibility Extention

HSPで作られた全画面表示のゲームなどを、複数解像度に簡単に対応させるための拡張です  
やっていることは非常に簡単で、*描画先のウィンドウを別のウィンドウに退避させ、その描画内容を拡縮する*ことで複数解像度に対応させています。  
したがって、元の描画サイズがあまりに小さいと表示が荒くなったりするので注意してください。

## 使い方

ファイル`MRCE.as`をプロジェクトフォルダに置いた上で、

```
#include "MRCE.as"
```

でファイルをインクルードしてください。この状態で実行して以下のようになれば成功です。

![画面](http://i.gyazo.com/28b691c551434ef73bd2c4818211fc22.png)

基本的な使い方は以下のようになります。

```
#include "MRCE.as"

initDrawing 640, 480

setWindow

repeat

	startDrawing

	// Draw Something
	
	endDrawing 1000/60

loop

```

## 命令

### `initDrawing`

描画用画面の初期化

**`initDrawing p1, p2`**

p1=0〜(640) : 描画用画面の幅  
p2=0〜(480) : 描画用画面の高さ  

#### 解説

描画用の画面を初期化します。内部では、ウィンドウID 255番のウィンドウをp1, p2で与えられた幅、高さで非表示初期化します。

#### 注意

この後**ウィンドウID 255番を別の画像などで初期化することはできなくなります。**

---

### `setWindow`

表示用画面の初期化

**`setWindow`**

#### 解説

表示用の画面(すなわちウィンドウID0番)を初期化して全画面表示を開始します。

#### 注意

**この画面にタイトルバーはありません。** 閉じるには、Alt+F4を使用してください。しかし、**普通はなんらかの方法でユーザーが`end`命令にたどり着けるようにするべきです。**

---

### `startDrawing`

描画開始

**`startDrawing p1, p2, p3`**

p1,p2,p3=0～255(0) : 色コード（R,G,Bの輝度）

#### 解説

仮装画面上をp1, p2, p3で指定された色でクリアし、描画処理を開始します。

#### 注意

このコマンドを打った後は、すべての描画処理系のコマンドが仮装画面に対して行われます。  
したがって、表示される画面の見た目の変化は全く起こらなくなります。  
**このコマンドは必ず`endDrawing`とセットで使われます。**

---

### `endDrawing`

描画開始

**`endDrawing p1, p2`**

p1=0～(24) : 画面更新後の待ち時間(1ms単位)
p2=0〜1(0) : ズームのモード

#### 解説

`startDrawing`によって開始された描画処理を終了し、表示用画面に反映します。
p2が1の場合は、拡大縮小時にハーフトーンを使用します(Windows9Xでは動作しません。)が、*パフォーマンスが落ちる可能性が高いです。*

#### 注意

ふつうは`startDrawing`とセットで使います。


## 追加予定の機能

* 画面の解像度の強制変更オプションの追加
* スキャンラインの描画設定